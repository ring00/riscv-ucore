# 实验八：文件系统

## 练习一

### Unix的pipe机制

pipe对外表现为两个文件(一个输入端、一个输出端)，内部用一个FIFO队列实现功能

当用户调用`int file_pipe(int fd[2])`，系统会将pipe的输入输出端对应的文件描述符放入fd数组中

## 练习二

### Unix的硬链接和软链接机制

创建一个hard link实际上是新建一个文件结构然后指向已有的数据即可

* 复制`struct file`(由于指向同一块数据，需要浅复制)
* 将inode的引用计数加1
* 修改文件名称为用户指定的名称

一个soft link应当存储目标文件的地址，因此可以看成存有文件地址的文件

* 将目标文件地址保存为文件
* 当用户打开soft link时，先取出实际文件的路径，然后打开该路径
* 该路径也可能是soft link，要进行到打开时间文件为止

## 总结

### 实现与参考答案的区别

`load_icode`的主体基本一致，将argc和argv压栈的实现略微不同

### 知识点

* 文件系统抽象层VFS
* Simple FS文件系统
* 设备层文件IO层
